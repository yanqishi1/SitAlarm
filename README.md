# SitAlarm

一个基于 Python + PyQt5 的本地坐姿提醒软件，支持定时抓拍、姿势提醒、当天图片归档、正确坐姿时长统计。

## 功能

- 定时抓拍（1~60 分钟可配置，含黑屏/暗帧自动重试）
- 头占比坐姿识别（头部占画面比例过大判定为错误坐姿）
- 首次使用引导校准（拍 2 张正确坐姿照片，自动计算每台设备阈值）
- 摄像头调试页实时预览（自动开启，显示头框、头占比、姿态判定）
- 坐姿错误时托盘提醒 + 桌面弹窗提醒
- Vision 风格半透明磨砂主题（乳白色科技感 UI）
- 自定义软件 Logo（窗口与托盘图标）
- 可选屏幕超时提醒
- 当天图片按日期目录存储，本地可查看
- 今日与近 7 天坐姿统计图表
- 所有数据本地存储（SQLite + 本地图片）

## 环境

- Python 3.9+
- 推荐系统：macOS / Windows

## 安装依赖

```bash
pip install -r requirements.txt
```

## 启动

```bash
python main.py
```

## 首次使用（头占比校准）

1. 打开“设置”页。
2. 在“头占比校准（首次必做）”区域，连续点击“拍摄正确姿势样本”两次。
3. 每次拍摄时保持正确坐姿，头部正对摄像头。
4. 第二张成功后系统自动计算阈值并开始检测。

阈值计算方式：
- 取两张正确姿势样本的**最大头占比**；
- 阈值 = 最大头占比 × **1.15**（安全余量）。

## 调试页说明

- 切换到“摄像头调试”页后，会自动开启实时画面预览。
- 实时画面会叠加：
  - 头部画框
  - 当前头占比
  - 阈值触发状态（correct / incorrect / unknown）
- 点击“抓拍调试（保存图片）”可将当前帧保存到当天目录并更新调试详情。

## 本地数据位置

- 图片目录：`~/Pictures/SitAlarm/YYYY-MM-DD/`
- 数据库：`~/.sitalarm/sitalarm.db`
